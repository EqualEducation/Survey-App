
<template name="survey5">
	<!-- {{setSelectedSchoolDoc schoolId}} -->
  {{setSelectedDoc schoolId "labs"}}
  {{#autoForm collection="Labs" id="survey5" type=autoformType doc=selectedDoc resetOnSuccess=false autosave=true}}
        <button class="btn btn-primary btn-back">Back</button>
        <button type="submit" class="btn btn-primary">Save</button>
		    <fieldset>
      	<legend>Science Labs</legend>
  			{{> afQuickField name="hasLab" options="auto"}}
        {{#if afFieldValueIs name="hasLab" value=true}}
		      {{> sciencelabs}}
        {{/if}}
        {{> afQuickField name="school_id" options="auto"}}

        </fieldset>
   {{/autoForm}}
</template>

<template name="sciencelabs">
	{{> afQuickField name="hasComputerForGeneralUse" options="auto"}}
  {{> afQuickField name="numberOfLabs" options="auto"}}
  {{> afArrayField name="labs" template="lab"}}

</template>


<template name="afArrayField_lab">
  <div class="panel panel-default">
      <div class="panel-heading">{{afFieldLabelText name=this.atts.name}}</div>
      {{#if afFieldIsInvalid name=this.atts.name}}
      <div class="panel-body has-error">
        <span class="help-block">{{{afFieldMessage name=this.atts.name}}}</span>
      </div>
      {{/if}}
      <ul class="list-group">
        {{#if afArrayFieldHasLessThanMaximum name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
        <li class="list-group-item">
          <button type="button" class="btn btn-primary autoform-add-item" data-autoform-field="{{this.atts.name}}" data-autoform-minCount="{{this.atts.minCount}}" data-autoform-maxCount="{{this.atts.maxCount}}">Add another lab </button>
        </li>
        {{/if}}
        {{#afEachArrayItem name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
        <li class="list-group-item autoform-array-item">
          <div class="media">
            {{#if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount maxCount=../atts.maxCount}}
            <button type="button" class="btn btn-primary autoform-remove-item pull-left">Remove this lab </button>
            {{/if}}
            <div class="media-body">
              {{> lab_table}}
            </div>
          </div>
        </li>
        {{/afEachArrayItem}}
        {{#if afArrayFieldHasLessThanMaximum name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
        <li class="list-group-item">
          <button type="button" class="btn btn-primary autoform-add-item" data-autoform-field="{{this.atts.name}}" data-autoform-minCount="{{this.atts.minCount}}" data-autoform-maxCount="{{this.atts.maxCount}}">Add another lab </button>
        </li>
        {{/if}}
      </ul>
    </div>
</template>

<template name="lab_table">
  {{> afQuickField name=this.name label=false}}
</template>