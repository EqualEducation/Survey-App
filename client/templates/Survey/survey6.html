
<template name="survey6">
	  {{setSelectedSchoolDoc schoolId}}
  {{#autoForm collection="Schools" id="survey" type="update" doc=selectedSchoolDoc template="bootstrap3-horizontal" label-class="col-sm-3" input-col-class="col-sm-9" resetOnSuccess=false}}
  	<button class="btn btn-primary btn-back">Back</button>
	<button type="submit" class="btn btn-primary">Save</button>
		<fieldset>
	  		<legend>Perimeter Security</legend>
       		{{> afQuickField name="security.safetyLevel" options="auto"}}
       		{{> afQuickField name="security.hasFence" options="auto"}}

        	{{#if afFieldValueIs name="security.hasFence" value=true}}
				{{> security}}
            {{/if}}

       		{{> afQuickField name="security.hasBurglarBars" options="auto"}}
       		{{> afQuickField name="security.hasSecurityGaurd" options="auto"}}
       		{{> afQuickField name="security.comment" options="auto"}}

        </fieldset>
   {{/autoForm}}
</template>

<template name="security">
	{{> afQuickField name="security.fenceHasHoles" options="auto"}}
	{{> afQuickField name="security.fenceIsCorrectHeight" options="auto"}}
	{{> afQuickField name="security.conditionOfFence" options="auto"}}
</template>

<!-- SecuritySchema = new SimpleSchema({
  safetyLevel: {
    optional: true,
    type: String,
    label: "How safe do you consider your school?",
    autoform: {
      type: "select",
      options: function () {
        return [
          {label: "Usually safe", value: 'Usually safe'},
          {label: "Sometimes safe", value: 'Sometimes safe'},
          {label: "Usually unsafe", value: 'Usually unsafe'}
        ];
      }
    }
  },
  hasFence: {
   label: "Is there an appropriate fence around the school, including around all sports fields and facilitities?",
    optional: true,
    type: Boolean,
      autoform: {
        type: "boolean-radios",
        trueLabel: "Yes",
        falseLabel: "No",
      }
  },
  fenceHasHoles: {
   label: "Are there any holes or gaps in the fence?",
    optional: true,
    type: Boolean,
      autoform: {
        type: "boolean-radios",
        trueLabel: "Yes",
        falseLabel: "No",
      }
  },
  fenceIsCorrectHeight: {
   label: "Is the fence, in all places, at least 1.8 metres high?",
    optional: true,
    type: Boolean,
      autoform: {
        type: "boolean-radios",
        trueLabel: "Yes",
        falseLabel: "No",
      }
  },
  conditionOfFence: {
   label: "What is the condition of the fence or wall around your school?",
    optional: true,
    type: String,
    autoform: {
      type: "select",
      options: function () {
        return [
          {label: "Excellent (no repairs needed)", value: 'Excellent (no repairs needed)'},
          {label: "Average (no major issues at present)", value: 'Average (no major issues at present)'},
          {label: "Needs urgent repair (e.g. holes, breaks)", value: 'Needs urgent repair (e.g. holes, breaks)'}
        ];
      }
    }
  },
  hasBurglarBars: {
    label: "Are there burglar bars on the windows on the ground floors?",
   optional: true,
    type: Boolean,
      autoform: {
        type: "boolean-radios",
        trueLabel: "Yes",
        falseLabel: "No",
      }
  },
  hasSecurityGaurd: {
    label: "Is there a security gaurd controlling access at the gate?",
    optional: true,
    type: Boolean,
      autoform: {
        type: "boolean-radios",
        trueLabel: "Yes",
        falseLabel: "No",
      }
  },
  comment: {
    type: String,
    optional: true,
    label: "Comment"

  }
}); -->